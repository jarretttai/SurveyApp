{"ast":null,"code":"import _objectSpread from \"D:\\\\src\\\\SurveyApp\\\\SurveyAppClient\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"D:\\\\src\\\\SurveyApp\\\\SurveyAppClient\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"D:\\\\src\\\\SurveyApp\\\\SurveyAppClient\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\src\\\\SurveyApp\\\\SurveyAppClient\\\\src\\\\views\\\\Signup.js\";\nimport React, { useState } from \"react\";\nimport { Button, Grid, Paper, Typography, Link } from \"@material-ui/core\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport EmojiPeopleRoundedIcon from '@material-ui/icons/EmojiPeopleRounded';\nimport styles from \"../styles/SignFormStyle\";\nvar useStyles = makeStyles(styles);\n\nfunction Signup(props) {\n  var classes = useStyles();\n  var errObj = {\n    unameEmpty: false,\n    unameOccupied: false,\n    emailEmpty: false,\n    emailError: false,\n    emailOccupied: false,\n    pwdError: false,\n    pwdRepeatError: false\n  };\n\n  var _useState = useState(errObj),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      uname = _useState4[0],\n      setUname = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      email = _useState6[0],\n      setEmail = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      pwd = _useState8[0],\n      setPwd = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      pwdRepeat = _useState10[0],\n      setPwdRepeat = _useState10[1];\n\n  var validateAndUpdateUname = function validateAndUpdateUname(e) {\n    if (e.target.value === \"\") {\n      var unameEmpty = error.unameEmpty,\n          others = _objectWithoutProperties(error, [\"unameEmpty\"]);\n\n      unameEmpty = true;\n      setError(_objectSpread({\n        unameEmpty: unameEmpty\n      }, others));\n    } else if (false) {\n      //留给fetch,验证是否被占用\n      var unameOccupied = error.unameOccupied,\n          _others = _objectWithoutProperties(error, [\"unameOccupied\"]);\n\n      unameOccupied = true;\n      setError(_objectSpread({\n        unameOccupied: unameOccupied\n      }, _others));\n    } else {\n      var _unameEmpty = error.unameEmpty,\n          _unameOccupied = error.unameOccupied,\n          _others2 = _objectWithoutProperties(error, [\"unameEmpty\", \"unameOccupied\"]);\n\n      _unameEmpty = false;\n      _unameOccupied = false;\n      setError(_objectSpread({\n        unameEmpty: _unameEmpty,\n        unameOccupied: _unameOccupied\n      }, _others2));\n    }\n\n    setUname(e.target.value);\n  };\n\n  var unameHelperText = function unameHelperText() {\n    if (error.unameEmpty) return \"please input an username\";else if (error.enameOccupied) return \"username occupied\";\n  };\n\n  var validateAndUpdateEmail = function validateAndUpdateEmail(e) {\n    if (e.target.value === \"\") {\n      //empty\n      var emailEmpty = error.emailEmpty,\n          others = _objectWithoutProperties(error, [\"emailEmpty\"]);\n\n      emailEmpty = true;\n      setError(_objectSpread({\n        emailEmpty: emailEmpty\n      }, others));\n    } else {\n      var regex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n      var _emailEmpty = error.emailEmpty,\n          emailError = error.emailError,\n          emailOccupied = error.emailOccupied,\n          _others3 = _objectWithoutProperties(error, [\"emailEmpty\", \"emailError\", \"emailOccupied\"]);\n\n      if (!regex.test(e.target.value)) {\n        //invalid input\n        emailError = true;\n        _emailEmpty = false;\n        setError(_objectSpread({\n          emailEmpty: _emailEmpty,\n          emailError: emailError\n        }, _others3));\n      } else if (false) {\n        var _emailOccupied = error.emailOccupied,\n            _others4 = _objectWithoutProperties(error, [\"emailOccupied\"]);\n\n        _emailOccupied = true;\n        setError(_objectSpread({\n          emailOccupied: _emailOccupied\n        }, _others4));\n      } else {\n        //no error\n        emailError = false;\n        _emailEmpty = false;\n        emailOccupied = false;\n        setError(_objectSpread({\n          emailEmpty: _emailEmpty,\n          emailError: emailError\n        }, _others3));\n      }\n    }\n\n    setEmail(e.target.value); //update email\n  };\n\n  var emailHelperText = function emailHelperText() {\n    if (error.emailEmpty) {\n      return \"Please enter an email address\";\n    } else if (error.emailError) {\n      return \"Please input correct email address\";\n    } else if (error.emailOccupied) {\n      return \"Email occupied\";\n    }\n  };\n\n  var validateAndUpdatePwd = function validateAndUpdatePwd(e) {\n    if (e.target.value.length < 6) {\n      var pwdError = error.pwdError,\n          others = _objectWithoutProperties(error, [\"pwdError\"]);\n\n      pwdError = true;\n      setError(_objectSpread({\n        pwdError: pwdError\n      }, others));\n    } else {\n      //No error\n      var pwdEmpty = error.pwdEmpty,\n          _pwdError = error.pwdError,\n          _others5 = _objectWithoutProperties(error, [\"pwdEmpty\", \"pwdError\"]);\n\n      _pwdError = false;\n      pwdEmpty = false;\n      setError(_objectSpread({\n        pwdEmpty: pwdEmpty,\n        pwdError: _pwdError\n      }, _others5));\n    }\n\n    setPwd(e.target.value); //Update Password\n  };\n\n  var pwdHelperText = function pwdHelperText() {\n    if (error.pwdError) return \"Your password should be longer than 6 characters\";\n  };\n\n  var validateAndUpdatePwdRepeat = function validateAndUpdatePwdRepeat(e) {\n    if (e.target.value !== pwd) {\n      var pwdRepeatError = error.pwdRepeatError,\n          others = _objectWithoutProperties(error, [\"pwdRepeatError\"]);\n\n      pwdRepeatError = true;\n      setError(_objectSpread({\n        pwdRepeatError: pwdRepeatError\n      }, others));\n    } else {\n      var _pwdRepeatError = error.pwdRepeatError,\n          _others6 = _objectWithoutProperties(error, [\"pwdRepeatError\"]);\n\n      _pwdRepeatError = false;\n      setError(_objectSpread({\n        pwdRepeatError: _pwdRepeatError\n      }, _others6));\n    }\n\n    setPwdRepeat(e.target.value);\n  };\n\n  var pwdRepeatHelperText = function pwdRepeatHelperText() {\n    if (error.pwdRepeatError) return \"Different from the password above\";\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    console.log(e);\n    console.log(uname);\n    console.log(email);\n    console.log(pwd);\n    console.log(pwdRepeat);\n    props.history.push(\"/login\");\n  };\n\n  return /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    alignItems: \"center\",\n    style: {\n      minHeight: \"90vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    sm: 10,\n    md: 6,\n    lg: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justify: \"center\",\n    alignItems: \"center\",\n    spacing: 1,\n    className: classes.formHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(EmojiPeopleRoundedIcon, {\n    color: \"primary\",\n    style: {\n      fontSize: 48\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  }, \"Sign up\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, \"Already have an account? \", /*#__PURE__*/React.createElement(Link, {\n    href: \"/login\",\n    underline: \"always\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, \"Sign in here\")))), /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"signup-uname\",\n    label: \"Username\",\n    helperText: unameHelperText(),\n    variant: \"outlined\",\n    margin: \"normal\",\n    size: \"medium\",\n    fullWidth: true,\n    required: true,\n    onBlur: validateAndUpdateUname,\n    error: error.unameEmpty || error.unameOccupied,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"signup-email\",\n    label: \"Email\",\n    helperText: emailHelperText(),\n    variant: \"outlined\",\n    margin: \"normal\",\n    size: \"medium\",\n    fullWidth: true,\n    required: true,\n    onBlur: validateAndUpdateEmail,\n    error: error.emailEmpty || error.emailError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"signup-pwd\",\n    type: \"password\",\n    label: \"Password\",\n    helperText: pwdHelperText(),\n    variant: \"outlined\",\n    margin: \"normal\",\n    size: \"medium\",\n    fullWidth: true,\n    onBlur: validateAndUpdatePwd,\n    error: error.pwdError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"signup-pwd-rpt\",\n    type: \"password\",\n    label: \"Repeat Password\",\n    helperText: pwdRepeatHelperText(),\n    variant: \"outlined\",\n    margin: \"normal\",\n    size: \"medium\",\n    fullWidth: true,\n    required: true,\n    onBlur: validateAndUpdatePwdRepeat,\n    error: error.pwdRepeatError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    size: \"medium\",\n    fullWidth: true,\n    type: \"submit\",\n    className: classes.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }\n  }, \"Sign Up\")))));\n}\n\nexport default Signup;","map":{"version":3,"sources":["D:/src/SurveyApp/SurveyAppClient/src/views/Signup.js"],"names":["React","useState","Button","Grid","Paper","Typography","Link","TextField","makeStyles","EmojiPeopleRoundedIcon","styles","useStyles","Signup","props","classes","errObj","unameEmpty","unameOccupied","emailEmpty","emailError","emailOccupied","pwdError","pwdRepeatError","error","setError","uname","setUname","email","setEmail","pwd","setPwd","pwdRepeat","setPwdRepeat","validateAndUpdateUname","e","target","value","others","unameHelperText","enameOccupied","validateAndUpdateEmail","regex","test","emailHelperText","validateAndUpdatePwd","length","pwdEmpty","pwdHelperText","validateAndUpdatePwdRepeat","pwdRepeatHelperText","handleSubmit","preventDefault","console","log","history","push","minHeight","paper","formHeader","fontSize","form","button"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Button, Grid, Paper, Typography, Link } from \"@material-ui/core\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport EmojiPeopleRoundedIcon from '@material-ui/icons/EmojiPeopleRounded';\r\n\r\nimport styles from \"../styles/SignFormStyle\";\r\n\r\nconst useStyles = makeStyles(styles);\r\n\r\nfunction Signup(props) {\r\n\r\n  const classes = useStyles();\r\n  const errObj = {\r\n    unameEmpty: false,\r\n    unameOccupied: false,\r\n    emailEmpty: false,  \r\n    emailError: false,\r\n    emailOccupied: false, \r\n    pwdError: false,\r\n    pwdRepeatError: false,\r\n  }\r\n  const [error, setError] = useState(errObj);\r\n  const [uname, setUname] = useState();\r\n  const [email, setEmail] = useState();\r\n  const [pwd, setPwd] = useState();\r\n  const [pwdRepeat, setPwdRepeat] = useState();\r\n\r\n  const validateAndUpdateUname = (e) => {\r\n    if (e.target.value===\"\") {\r\n      let {unameEmpty, ...others} = error; \r\n      unameEmpty = true;\r\n      setError({unameEmpty, ...others});\r\n    }\r\n    else if (false) { //留给fetch,验证是否被占用\r\n      let {unameOccupied, ...others} = error; \r\n      unameOccupied = true;\r\n      setError({unameOccupied, ...others});\r\n    }\r\n    else {\r\n      let {unameEmpty, unameOccupied, ...others} = error; \r\n      unameEmpty = false; unameOccupied = false;\r\n      setError({unameEmpty, unameOccupied, ...others});\r\n    }\r\n    setUname(e.target.value);\r\n  }\r\n\r\n  const unameHelperText = () => {\r\n    if (error.unameEmpty) return \"please input an username\";\r\n    else if (error.enameOccupied) return \"username occupied\";\r\n  }\r\n\r\n  const validateAndUpdateEmail = (e) => {\r\n    if (e.target.value===\"\") {  //empty\r\n      let {emailEmpty, ...others} = error;\r\n      emailEmpty = true;\r\n      setError({emailEmpty, ...others});\r\n    } \r\n    else {\r\n      const regex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n      let {emailEmpty, emailError, emailOccupied, ...others} = error;\r\n      if (!regex.test(e.target.value)) {  //invalid input\r\n        emailError = true;  emailEmpty = false;\r\n        setError({emailEmpty, emailError, ...others});\r\n      } \r\n      else if (false) {\r\n        let {emailOccupied, ...others} = error; \r\n        emailOccupied = true;\r\n        setError({emailOccupied, ...others});\r\n      }\r\n      else {  //no error\r\n        emailError = false; emailEmpty = false; emailOccupied = false;\r\n        setError({emailEmpty, emailError, ...others});\r\n      }\r\n    }\r\n    setEmail(e.target.value); //update email\r\n  }\r\n\r\n  const emailHelperText = () => {\r\n    if (error.emailEmpty) {\r\n      return \"Please enter an email address\"\r\n    } \r\n    else if (error.emailError) {\r\n      return \"Please input correct email address\"\r\n    }\r\n    else if (error.emailOccupied){\r\n      return \"Email occupied\";\r\n    }\r\n  }\r\n\r\n  const validateAndUpdatePwd = (e) => {\r\n    if (e.target.value.length < 6) {\r\n      let {pwdError, ...others} = error;\r\n      pwdError = true;\r\n      setError({pwdError, ...others});\r\n    } else {\r\n      //No error\r\n      let {pwdEmpty, pwdError, ...others} = error;\r\n      pwdError = false;\r\n      pwdEmpty = false;\r\n      setError({pwdEmpty, pwdError, ...others});     \r\n    }\r\n    setPwd(e.target.value); //Update Password\r\n  }\r\n\r\n  const pwdHelperText = () => {\r\n    if (error.pwdError) return \"Your password should be longer than 6 characters\"\r\n  }\r\n\r\n  const validateAndUpdatePwdRepeat = (e) => {\r\n    if (e.target.value !== pwd) {\r\n      let {pwdRepeatError, ...others} = error;\r\n      pwdRepeatError = true;\r\n      setError({pwdRepeatError, ...others});\r\n    }\r\n    else {\r\n      let {pwdRepeatError, ...others} = error;\r\n      pwdRepeatError = false;\r\n      setError({pwdRepeatError, ...others});\r\n    }\r\n    setPwdRepeat(e.target.value);\r\n  }\r\n\r\n  const pwdRepeatHelperText = () => {\r\n    if (error.pwdRepeatError) return \"Different from the password above\"\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n\r\n    e.preventDefault();\r\n\r\n    console.log(e);\r\n    console.log(uname);\r\n    console.log(email);\r\n    console.log(pwd);\r\n    console.log(pwdRepeat);\r\n\r\n    props.history.push(\"/login\");\r\n\r\n  }\r\n\r\n  return (\r\n    <Grid container justify=\"center\" alignItems=\"center\" style={{ minHeight: \"90vh\" }}>\r\n      <Grid item sm={10} md={6} lg={3}>\r\n        <Paper className={classes.paper}>\r\n\r\n          <Grid\r\n            container\r\n            direction=\"column\"\r\n            justify=\"center\"\r\n            alignItems=\"center\"\r\n            spacing={1}\r\n            className={classes.formHeader}\r\n          >\r\n            <Grid item>\r\n              <EmojiPeopleRoundedIcon color=\"primary\" style={{ fontSize: 48 }}/>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography variant=\"h4\">Sign up</Typography>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography variant=\"body2\">\r\n                {\"Already have an account? \"}\r\n                <Link href=\"/login\" underline=\"always\">\r\n                  Sign in here\r\n                </Link>\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <form className={classes.form} onSubmit={handleSubmit}>\r\n            <TextField\r\n              id=\"signup-uname\"\r\n              label=\"Username\"\r\n              helperText={unameHelperText()}\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              size=\"medium\"\r\n              fullWidth\r\n              required\r\n              onBlur={validateAndUpdateUname}\r\n              error={error.unameEmpty||error.unameOccupied}\r\n            />\r\n            <TextField\r\n              id=\"signup-email\"\r\n              label=\"Email\"\r\n              helperText={emailHelperText()}\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              size=\"medium\"\r\n              fullWidth\r\n              required\r\n              onBlur={validateAndUpdateEmail}\r\n              error={error.emailEmpty||error.emailError}\r\n            />\r\n            <TextField\r\n              id=\"signup-pwd\"\r\n              type=\"password\"\r\n              label=\"Password\"\r\n              helperText={pwdHelperText()}\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              size=\"medium\"\r\n              fullWidth\r\n              onBlur={validateAndUpdatePwd}\r\n              error={error.pwdError}\r\n            />\r\n            <TextField\r\n              id=\"signup-pwd-rpt\"\r\n              type=\"password\"\r\n              label=\"Repeat Password\"\r\n              helperText={pwdRepeatHelperText()}\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              size=\"medium\"\r\n              fullWidth\r\n              required\r\n              onBlur={validateAndUpdatePwdRepeat}\r\n              error={error.pwdRepeatError}\r\n            />\r\n            <Button \r\n              variant=\"contained\" \r\n              color=\"primary\" \r\n              size=\"medium\" \r\n              fullWidth\r\n              type=\"submit\" \r\n              className={classes.button}>\r\n              Sign Up\r\n            </Button>\r\n          </form>\r\n\r\n        </Paper>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default Signup;\r\n"]},"metadata":{},"sourceType":"module"}