{"ast":null,"code":"import _objectWithoutProperties from \"D:\\\\src\\\\SurveyAppClient\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"D:\\\\src\\\\SurveyAppClient\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _toArray from \"D:\\\\src\\\\SurveyAppClient\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toArray\";\nimport _slicedToArray from \"D:\\\\src\\\\SurveyAppClient\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\src\\\\SurveyAppClient\\\\src\\\\views\\\\Signup.js\";\nimport React, { useState } from \"react\";\nimport { Button, Grid, Paper, Typography, Link } from \"@material-ui/core\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport EmojiPeopleRoundedIcon from '@material-ui/icons/EmojiPeopleRounded';\nimport styles from \"../styles/SignFormStyle\";\nvar useStyles = makeStyles(styles);\n\nfunction Signup(props) {\n  var classes = useStyles();\n  var errObj = {\n    unameEmpty: false,\n    unameOccupied: false,\n    emailEmpty: false,\n    emailError: false,\n    emailOccupied: false,\n    pwdError: false,\n    pwdRepeatError: false\n  };\n\n  var _useState = useState(errObj),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      uname = _useState4[0],\n      setUname = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      email = _useState6[0],\n      setEmail = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      pwd = _useState8[0],\n      setPwd = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      pwdRepeat = _useState10[0],\n      setPwdRepeat = _useState10[1];\n\n  var validateAndUpdateUname = function validateAndUpdateUname(e) {\n    if (e.target.value === \"\") {\n      var _error = _toArray(error),\n          unameEmpty = _error[0],\n          others = _error.slice(1);\n\n      unameEmpty = true;\n      setError(_objectSpread({\n        unameEmpty: unameEmpty\n      }, others));\n    } else if (false) {\n      //留给fetch,验证是否被占用\n      var _error2 = _toArray(error),\n          unameOccupied = _error2[0],\n          _others = _error2.slice(1);\n\n      unameOccupied = true;\n      setError(_objectSpread({\n        unameOccupied: unameOccupied\n      }, _others));\n    } else {\n      var _error3 = _toArray(error),\n          _unameEmpty = _error3[0],\n          _unameOccupied = _error3[1],\n          _others2 = _error3.slice(2);\n\n      _unameEmpty = true;\n      _unameOccupied = true;\n      setError(_objectSpread({\n        unameEmpty: _unameEmpty,\n        unameOccupied: _unameOccupied\n      }, _others2));\n    }\n\n    setUname(e.target.value);\n  };\n\n  var validateAndUpdateEmail = function validateAndUpdateEmail(e) {\n    if (e.target.value === \"\") {\n      //empty\n      var emailEmpty = error.emailEmpty,\n          others = _objectWithoutProperties(error, [\"emailEmpty\"]);\n\n      emailEmpty = true;\n      setError(_objectSpread({\n        emailEmpty: emailEmpty\n      }, others));\n    } else {\n      var regex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n      var _emailEmpty = error.emailEmpty,\n          emailError = error.emailError,\n          emailOccupied = error.emailOccupied,\n          _others3 = _objectWithoutProperties(error, [\"emailEmpty\", \"emailError\", \"emailOccupied\"]);\n\n      if (!regex.test(e.target.value)) {\n        //invalid input\n        emailError = true;\n        _emailEmpty = false;\n        setError(_objectSpread({\n          emailEmpty: _emailEmpty,\n          emailError: emailError\n        }, _others3));\n      } else if (false) {\n        var _error4 = _toArray(error),\n            _emailOccupied = _error4[0],\n            _others4 = _error4.slice(1);\n\n        _emailOccupied = true;\n        setError(_objectSpread({\n          emailOccupied: _emailOccupied\n        }, _others4));\n      } else {\n        //no error\n        emailError = false;\n        _emailEmpty = false;\n        emailOccupied = false;\n        setError(_objectSpread({\n          emailEmpty: _emailEmpty,\n          emailError: emailError\n        }, _others3));\n      }\n    }\n\n    setEmail(e.target.value); //update email\n  };\n\n  var emailHelperText = function emailHelperText() {\n    if (error.emailEmpty) {\n      return \"Please enter an email address\";\n    } else if (error.emailError) {\n      return \"Please input correct email address\";\n    } else {\n      return \"\";\n    }\n  };\n\n  var validateAndUpdatePwd = function validateAndUpdatePwd(e) {\n    if (e.target.value.length < 6) {\n      var pwdEmpty = error.pwdEmpty,\n          others = _objectWithoutProperties(error, [\"pwdEmpty\"]);\n\n      pwdEmpty = true;\n      setError(_objectSpread({\n        pwdEmpty: pwdEmpty\n      }, others));\n    } else {\n      //No error\n      var _pwdEmpty = error.pwdEmpty,\n          pwdError = error.pwdError,\n          _others5 = _objectWithoutProperties(error, [\"pwdEmpty\", \"pwdError\"]);\n\n      pwdError = false;\n      _pwdEmpty = false;\n      setError(_objectSpread({\n        pwdEmpty: _pwdEmpty,\n        pwdError: pwdError\n      }, _others5));\n    }\n\n    setPwd(e.target.value); //Update Password\n  };\n\n  var pwdHelperText = function pwdHelperText() {\n    if (error.pwdError) {\n      return \"Your password should be longer than 6 characters\";\n    } // else {\n    //   return \"\";\n    // }\n\n  };\n\n  var validateAndUpdatePwdRepeat = function validateAndUpdatePwdRepeat(e) {\n    if (e.target.value !== pwd) {\n      var _error5 = _toArray(error),\n          pwdRepeatError = _error5[0],\n          others = _error5.slice(1);\n\n      pwdRepeatError = false;\n      setError(_objectSpread({\n        pwdRepeatError: pwdRepeatError\n      }, others));\n    } else {\n      var _error6 = _toArray(error),\n          _pwdRepeatError = _error6[0],\n          _others6 = _error6.slice(1);\n\n      _pwdRepeatError = true;\n      setError(_objectSpread({\n        pwdRepeatError: _pwdRepeatError\n      }, _others6));\n    }\n  };\n\n  var pwdRepeatHelperText = function pwdRepeatHelperText() {\n    if (error.pwdRepeatError) return \"Different from the password input above\";\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    console.log(e);\n    console.log(email);\n    console.log(pwd);\n    props.history.push(\"/login\");\n  };\n\n  return /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    alignItems: \"center\",\n    style: {\n      minHeight: \"100vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    sm: 10,\n    md: 6,\n    lg: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justify: \"center\",\n    alignItems: \"center\",\n    spacing: 1,\n    className: classes.formHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(EmojiPeopleRoundedIcon, {\n    color: \"primary\",\n    style: {\n      fontSize: 48\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  }, \"Sign up\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  }, \"Already have an account? \", /*#__PURE__*/React.createElement(Link, {\n    href: \"/login\",\n    underline: \"always\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }, \"Sign in here\")))), /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"signup-uname\",\n    label: \"Username\",\n    helperText: \"\",\n    variant: \"outlined\",\n    margin: \"normal\",\n    size: \"medium\",\n    fullWidth: true,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"signup-email\",\n    label: \"Email\",\n    helperText: emailHelperText(),\n    variant: \"outlined\",\n    margin: \"normal\",\n    size: \"medium\",\n    fullWidth: true,\n    required: true,\n    onBlur: validateAndUpdateEmail,\n    error: error.emailEmpty || error.emailError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"signup-pwd\",\n    type: \"password\",\n    label: \"Password\",\n    helperText: pwdHelperText(),\n    variant: \"outlined\",\n    margin: \"normal\",\n    size: \"medium\",\n    fullWidth: true,\n    onBlur: validateAndUpdatePwd,\n    error: error.pwdError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"signup-pwd-rpt\",\n    type: \"password\",\n    label: \"Repeat Password\",\n    helperText: pwdRepeatHelperText(),\n    variant: \"outlined\",\n    margin: \"normal\",\n    size: \"medium\",\n    fullWidth: true,\n    required: true,\n    onBlur: validateAndUpdatePwdRepeat,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    size: \"medium\",\n    fullWidth: true,\n    type: \"submit\",\n    className: classes.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }\n  }, \"Sign Up\")))));\n}\n\nexport default Signup;","map":{"version":3,"sources":["D:/src/SurveyAppClient/src/views/Signup.js"],"names":["React","useState","Button","Grid","Paper","Typography","Link","TextField","makeStyles","EmojiPeopleRoundedIcon","styles","useStyles","Signup","props","classes","errObj","unameEmpty","unameOccupied","emailEmpty","emailError","emailOccupied","pwdError","pwdRepeatError","error","setError","uname","setUname","email","setEmail","pwd","setPwd","pwdRepeat","setPwdRepeat","validateAndUpdateUname","e","target","value","others","validateAndUpdateEmail","regex","test","emailHelperText","validateAndUpdatePwd","length","pwdEmpty","pwdHelperText","validateAndUpdatePwdRepeat","pwdRepeatHelperText","handleSubmit","preventDefault","console","log","history","push","minHeight","paper","formHeader","fontSize","form","button"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Button, Grid, Paper, Typography, Link } from \"@material-ui/core\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport EmojiPeopleRoundedIcon from '@material-ui/icons/EmojiPeopleRounded';\r\n\r\nimport styles from \"../styles/SignFormStyle\";\r\n\r\nconst useStyles = makeStyles(styles);\r\n\r\nfunction Signup(props) {\r\n\r\n  const classes = useStyles();\r\n  const errObj = {\r\n    unameEmpty: false,\r\n    unameOccupied: false,\r\n    emailEmpty: false,  \r\n    emailError: false,\r\n    emailOccupied: false, \r\n    pwdError: false,\r\n    pwdRepeatError: false,\r\n  }\r\n  const [error, setError] = useState(errObj);\r\n  const [uname, setUname] = useState();\r\n  const [email, setEmail] = useState();\r\n  const [pwd, setPwd] = useState();\r\n  const [pwdRepeat, setPwdRepeat] = useState();\r\n\r\n  const validateAndUpdateUname = (e) => {\r\n    if (e.target.value===\"\") {\r\n      let [unameEmpty, ...others] = error; \r\n      unameEmpty = true;\r\n      setError({unameEmpty, ...others});\r\n    }\r\n    else if (false) { //留给fetch,验证是否被占用\r\n      let [unameOccupied, ...others] = error; \r\n      unameOccupied = true;\r\n      setError({unameOccupied, ...others});\r\n    }\r\n    else {\r\n      let [unameEmpty, unameOccupied, ...others] = error; \r\n      unameEmpty = true; unameOccupied = true;\r\n      setError({unameEmpty, unameOccupied, ...others});\r\n    }\r\n    setUname(e.target.value);\r\n  }\r\n\r\n  const validateAndUpdateEmail = (e) => {\r\n    if (e.target.value===\"\") {  //empty\r\n      let {emailEmpty, ...others} = error;\r\n      emailEmpty = true;\r\n      setError({emailEmpty, ...others});\r\n    } \r\n    else {\r\n      const regex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n      let {emailEmpty, emailError, emailOccupied, ...others} = error;\r\n      if (!regex.test(e.target.value)) {  //invalid input\r\n        emailError = true;  emailEmpty = false;\r\n        setError({emailEmpty, emailError, ...others});\r\n      } \r\n      else if (false) {\r\n        let [emailOccupied, ...others] = error; \r\n        emailOccupied = true;\r\n        setError({emailOccupied, ...others});\r\n      }\r\n      else {  //no error\r\n        emailError = false; emailEmpty = false; emailOccupied = false;\r\n        setError({emailEmpty, emailError, ...others});\r\n      }\r\n    }\r\n    setEmail(e.target.value); //update email\r\n  }\r\n\r\n  const emailHelperText = () => {\r\n    if (error.emailEmpty) {\r\n      return \"Please enter an email address\"\r\n    } \r\n    else if (error.emailError) {\r\n      return \"Please input correct email address\"\r\n    }\r\n    else {\r\n      return \"\";\r\n    }\r\n  }\r\n\r\n  const validateAndUpdatePwd = (e) => {\r\n    if (e.target.value.length < 6) {\r\n      let {pwdEmpty, ...others} = error;\r\n      pwdEmpty = true;\r\n      setError({pwdEmpty, ...others});\r\n    } else {\r\n      //No error\r\n      let {pwdEmpty, pwdError, ...others} = error;\r\n      pwdError = false;\r\n      pwdEmpty = false;\r\n      setError({pwdEmpty, pwdError, ...others});     \r\n    }\r\n    setPwd(e.target.value); //Update Password\r\n  }\r\n\r\n  const pwdHelperText = () => {\r\n    if (error.pwdError) {\r\n      return \"Your password should be longer than 6 characters\"\r\n    }\r\n    // else {\r\n    //   return \"\";\r\n    // }\r\n  }\r\n\r\n  const validateAndUpdatePwdRepeat = (e) => {\r\n    if (e.target.value !== pwd) {\r\n      let [pwdRepeatError, ...others] = error;\r\n      pwdRepeatError = false;\r\n      setError({pwdRepeatError, ...others});\r\n    }\r\n    else {\r\n      let [pwdRepeatError, ...others] = error;\r\n      pwdRepeatError = true;\r\n      setError({pwdRepeatError, ...others});\r\n    }\r\n  }\r\n\r\n  const pwdRepeatHelperText = () => {\r\n    if (error.pwdRepeatError) return \"Different from the password input above\"\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n\r\n    e.preventDefault();\r\n\r\n    console.log(e);\r\n    console.log(email);\r\n    console.log(pwd);\r\n\r\n    props.history.push(\"/login\");\r\n\r\n  }\r\n\r\n  return (\r\n    <Grid container justify=\"center\" alignItems=\"center\" style={{ minHeight: \"100vh\" }}>\r\n      <Grid item sm={10} md={6} lg={3}>\r\n        <Paper className={classes.paper}>\r\n\r\n          <Grid\r\n            container\r\n            direction=\"column\"\r\n            justify=\"center\"\r\n            alignItems=\"center\"\r\n            spacing={1}\r\n            className={classes.formHeader}\r\n          >\r\n            <Grid item>\r\n              <EmojiPeopleRoundedIcon color=\"primary\" style={{ fontSize: 48 }}/>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography variant=\"h4\">Sign up</Typography>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography variant=\"body2\">\r\n                {\"Already have an account? \"}\r\n                <Link href=\"/login\" underline=\"always\">\r\n                  Sign in here\r\n                </Link>\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <form className={classes.form} onSubmit={handleSubmit}>\r\n            <TextField\r\n              id=\"signup-uname\"\r\n              label=\"Username\"\r\n              helperText=\"\"\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              size=\"medium\"\r\n              fullWidth\r\n              required\r\n            />\r\n            <TextField\r\n              id=\"signup-email\"\r\n              label=\"Email\"\r\n              helperText={emailHelperText()}\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              size=\"medium\"\r\n              fullWidth\r\n              required\r\n              onBlur={validateAndUpdateEmail}\r\n              error={error.emailEmpty||error.emailError}\r\n            />\r\n            <TextField\r\n              id=\"signup-pwd\"\r\n              type=\"password\"\r\n              label=\"Password\"\r\n              helperText={pwdHelperText()}\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              size=\"medium\"\r\n              fullWidth\r\n              onBlur={validateAndUpdatePwd}\r\n              error={error.pwdError}\r\n            />\r\n            <TextField\r\n              id=\"signup-pwd-rpt\"\r\n              type=\"password\"\r\n              label=\"Repeat Password\"\r\n              helperText={pwdRepeatHelperText()}\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              size=\"medium\"\r\n              fullWidth\r\n              required\r\n              onBlur={validateAndUpdatePwdRepeat}\r\n            />\r\n            <Button \r\n              variant=\"contained\" \r\n              color=\"primary\" \r\n              size=\"medium\" \r\n              fullWidth\r\n              type=\"submit\" \r\n              className={classes.button}>\r\n              Sign Up\r\n            </Button>\r\n          </form>\r\n\r\n        </Paper>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default Signup;\r\n"]},"metadata":{},"sourceType":"module"}