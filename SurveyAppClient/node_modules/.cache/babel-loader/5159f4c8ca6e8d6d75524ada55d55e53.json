{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\src\\\\SurveyApp\\\\SurveyAppClient\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _slicedToArray from \"D:\\\\src\\\\SurveyApp\\\\SurveyAppClient\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"D:\\\\src\\\\SurveyApp\\\\SurveyAppClient\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"D:\\\\src\\\\SurveyApp\\\\SurveyAppClient\\\\src\\\\views\\\\Home.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { Typography, makeStyles, Toolbar, IconButton } from \"@material-ui/core\";\nimport UpdateIcon from '@material-ui/icons/Update';\nimport Button from \"@material-ui/core/Button\";\nimport { useCookies } from 'react-cookie';\nimport AppHeader from \"../components/AppHeader\";\nimport AppDrawer from \"../components/AppDrawer\";\nimport SurveyCard from \"../components/SurveyCard\";\nimport styles from \"../styles/HomePageStyle\";\nvar useStyles = makeStyles(styles); // const fetchAllForms = () => {\n//   let headers = new Headers();\n//   headers.append(\"Content-Type\", \"application/json;charset=UTF-8\");\n//   const init = {\n//     method: 'GET',\n//     headers: headers\n//   };\n//   fetch(\"/api/forms\", init)\n//     .then(res => res.json())\n//     .then(data => {console.log(data);forms=JSON.parse(JSON.stringify(data)).slice;});\n// }\n\nfunction fetchAllForms() {\n  return _fetchAllForms.apply(this, arguments);\n}\n\nfunction _fetchAllForms() {\n  _fetchAllForms = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var headers, init, res, data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            headers = new Headers();\n            headers.append(\"Content-Type\", \"application/json;charset=UTF-8\");\n            init = {\n              method: 'GET',\n              headers: headers\n            };\n            _context.next = 5;\n            return fetch(\"/api/forms\", init);\n\n          case 5:\n            res = _context.sent;\n            _context.next = 8;\n            return res.json();\n\n          case 8:\n            data = _context.sent;\n            console.log(data);\n            console.log(JSON.parse(JSON.stringify(data)).slice());\n            _context.next = 13;\n            return JSON.parse(JSON.stringify(data)).slice();\n\n          case 13:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchAllForms.apply(this, arguments);\n}\n\nexport default function Home(props) {\n  var _this = this;\n\n  var classes = useStyles();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      drawerOpen = _useState2[0],\n      setDrawerOpen = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      forms = _useState4[0],\n      setForms = _useState4[1];\n\n  var _useCookies = useCookies(),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookies = _useCookies2[0],\n      setCookie = _useCookies2[1]; //验证cookies以检查登陆状态\n\n\n  if (cookies.mail == null) props.history.replace(\"/login\");\n  useEffect(function () {\n    setForms(fetchAllForms());\n    console.log(forms);\n  }); // const forms = fetchAllForms()\n  // console.log(forms);\n  //////////////\n\n  var nameTest = \"Survey Demo X\";\n  var idTest = \"00000\";\n  var responseTest = 8;\n  var dateTest = new Date().toLocaleDateString(); ///////////////////////////\n\n  var handleDrawerOpen = function handleDrawerOpen(e) {\n    setDrawerOpen(true);\n  };\n\n  var handleDrawerClose = function handleDrawerClose(e) {\n    setDrawerOpen(false);\n  };\n\n  var handleNewForm = function handleNewForm(e) {\n    props.history.push(\"/edit/00001\");\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(AppHeader, {\n    handleDrawerOpen: handleDrawerOpen,\n    drawerOpen: drawerOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(AppDrawer, {\n    open: drawerOpen,\n    handleDrawerClose: handleDrawerClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Toolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justify: \"center\",\n    alignItems: \"flex-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    sm: 1,\n    md: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    container: true,\n    md: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    \"flex-grow\": 1,\n    className: classes.listHead,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle2\",\n    className: classes.headFont,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, \"Recent Forms\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    className: classes.leftHead,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    className: classes.updateIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(UpdateIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleNewForm,\n    className: classes.addButton,\n    variant: \"contained\",\n    size: \"small\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, \"+  new form\"))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    sm: 1,\n    md: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    alignItems: \"center\",\n    className: classes.mainArea,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 6\n    }\n  }, forms instanceof Array ? forms.map(function (form, index) {\n    return /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(SurveyCard, {\n      name: form.title,\n      id: form.formId,\n      resNum: 0,\n      date: form.date,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    }));\n  }) : null, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SurveyCard, {\n    name: nameTest,\n    id: idTest,\n    resNum: responseTest,\n    date: dateTest,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SurveyCard, {\n    name: nameTest,\n    id: idTest,\n    resNum: responseTest,\n    date: dateTest,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SurveyCard, {\n    name: nameTest,\n    id: idTest,\n    resNum: responseTest,\n    date: dateTest,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SurveyCard, {\n    name: nameTest,\n    id: idTest,\n    resNum: responseTest,\n    date: dateTest,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SurveyCard, {\n    name: nameTest,\n    id: idTest,\n    resNum: responseTest,\n    date: dateTest,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }))));\n}","map":{"version":3,"sources":["D:/src/SurveyApp/SurveyAppClient/src/views/Home.js"],"names":["React","useState","useEffect","Grid","Typography","makeStyles","Toolbar","IconButton","UpdateIcon","Button","useCookies","AppHeader","AppDrawer","SurveyCard","styles","useStyles","fetchAllForms","headers","Headers","append","init","method","fetch","res","json","data","console","log","JSON","parse","stringify","slice","Home","props","classes","drawerOpen","setDrawerOpen","forms","setForms","cookies","setCookie","mail","history","replace","nameTest","idTest","responseTest","dateTest","Date","toLocaleDateString","handleDrawerOpen","e","handleDrawerClose","handleNewForm","push","listHead","headFont","leftHead","updateIcon","addButton","mainArea","Array","map","form","index","title","formId","date"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { Typography, makeStyles, Toolbar, IconButton } from \"@material-ui/core\";\r\nimport UpdateIcon from '@material-ui/icons/Update';\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { useCookies } from 'react-cookie';\r\n\r\nimport AppHeader from \"../components/AppHeader\";\r\nimport AppDrawer from \"../components/AppDrawer\";\r\nimport SurveyCard from \"../components/SurveyCard\";\r\nimport styles from \"../styles/HomePageStyle\";\r\n\r\n\r\nconst useStyles = makeStyles(styles);\r\n\r\n// const fetchAllForms = () => {\r\n//   let headers = new Headers();\r\n//   headers.append(\"Content-Type\", \"application/json;charset=UTF-8\");\r\n//   const init = {\r\n//     method: 'GET',\r\n//     headers: headers\r\n//   };\r\n//   fetch(\"/api/forms\", init)\r\n//     .then(res => res.json())\r\n//     .then(data => {console.log(data);forms=JSON.parse(JSON.stringify(data)).slice;});\r\n// }\r\n\r\nasync function fetchAllForms() {\r\n  let headers = new Headers();\r\n  headers.append(\"Content-Type\", \"application/json;charset=UTF-8\");\r\n  const init = {\r\n    method: 'GET',\r\n    headers: headers\r\n  };\r\n  const res = await fetch(\"/api/forms\", init);\r\n  const data = await res.json();\r\n  console.log(data);\r\n  console.log(JSON.parse(JSON.stringify(data)).slice());\r\n  return await JSON.parse(JSON.stringify(data)).slice();\r\n}\r\n\r\n\r\nexport default function Home(props) {\r\n\r\n  const classes = useStyles();\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [forms, setForms] = useState([]);\r\n  const [cookies, setCookie] = useCookies();\r\n\r\n  //验证cookies以检查登陆状态\r\n  if (cookies.mail==null) props.history.replace(\"/login\");\r\n\r\n\r\n  useEffect(() => {\r\n    setForms(fetchAllForms());\r\n    console.log(forms);\r\n  })\r\n  // const forms = fetchAllForms()\r\n  // console.log(forms);\r\n\r\n  //////////////\r\n  const nameTest=\"Survey Demo X\";\r\n  const idTest=\"00000\";\r\n  const responseTest=8;\r\n  const dateTest= new Date().toLocaleDateString();\r\n  ///////////////////////////\r\n\r\n  const handleDrawerOpen = (e) => {\r\n    setDrawerOpen(true);\r\n  }\r\n\r\n  const handleDrawerClose = e => {\r\n    setDrawerOpen(false);\r\n  }\r\n\r\n  const handleNewForm = e => {\r\n    props.history.push(\"/edit/00001\");\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n\r\n      <AppHeader handleDrawerOpen={handleDrawerOpen} drawerOpen={drawerOpen} />\r\n      <AppDrawer open={drawerOpen} handleDrawerClose={handleDrawerClose} />\r\n      <Toolbar />\r\n\r\n      \r\n      <Grid container direction=\"row\" justify=\"center\" alignItems=\"flex-start\">\r\n        <Grid item sm={1} md={3}></Grid>\r\n        <Grid item container md>\r\n          <Grid item flex-grow={1} className={classes.listHead}>\r\n            <Typography variant=\"subtitle2\" className={classes.headFont}>Recent Forms</Typography>\r\n          </Grid>\r\n          <Grid item className={classes.leftHead} >\r\n            <IconButton className={classes.updateIcon}>\r\n              <UpdateIcon />\r\n            </IconButton>\r\n          </Grid>\r\n          <Grid item>\r\n            <Button \r\n            onClick={handleNewForm}\r\n            className={classes.addButton} \r\n            variant=\"contained\" \r\n            size=\"small\" \r\n            color=\"primary\">\r\n              +  new form\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item sm={1} md={3}></Grid>\r\n      </Grid>\r\n      \r\n     <Grid \r\n      container \r\n      direction=\"column\" \r\n      alignItems=\"center\" \r\n      \r\n      className={classes.mainArea}\r\n    >\r\n      {\r\n        forms instanceof Array?\r\n        forms.map((form, index) => (\r\n          <Grid item key={index}>\r\n            <SurveyCard name={form.title} id={form.formId} resNum={0} date={form.date} />\r\n          </Grid>\r\n        )): null\r\n      }     \r\n      <Grid item>\r\n        <SurveyCard name={nameTest} id={idTest} resNum={responseTest} date={dateTest} />\r\n      </Grid>\r\n      <Grid item>\r\n        <SurveyCard name={nameTest} id={idTest} resNum={responseTest} date={dateTest} />\r\n      </Grid>\r\n      <Grid item>\r\n        <SurveyCard name={nameTest} id={idTest} resNum={responseTest} date={dateTest} />\r\n      </Grid>\r\n      <Grid item>\r\n        <SurveyCard name={nameTest} id={idTest} resNum={responseTest} date={dateTest} />\r\n      </Grid>\r\n      <Grid item>\r\n        <SurveyCard name={nameTest} id={idTest} resNum={responseTest} date={dateTest} />\r\n      </Grid>\r\n    </Grid>\r\n    </React.Fragment>\r\n  );\r\n} \r\n"]},"metadata":{},"sourceType":"module"}